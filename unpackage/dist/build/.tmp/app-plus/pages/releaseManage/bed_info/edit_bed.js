(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/releaseManage/bed_info/edit_bed"],{"37d69":function(e,t,i){"use strict";i("83ff");var o=a(i("b0ce")),s=a(i("e7e0"));function a(e){return e&&e.__esModule?e:{default:e}}Page((0,o.default)(s.default))},"3d6f":function(e,t,i){"use strict";var o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("view",{staticClass:"edit_bed_page"},[i("view",{staticClass:"edit_form"},[i("view",{staticClass:"form_item",attrs:{eventid:"cce28ffe-0"},on:{tap:e.changeBedType}},[i("view",{staticClass:"label"},[e._v("床铺类型")]),i("view",{staticClass:"content_wrap"},[""!=e.modifyBedForm.type?i("text",{staticClass:"content"},["double"==e.modifyBedForm.type?i("text",[e._v("双人床")]):"single"==e.modifyBedForm.type?i("text",[e._v("单人床")]):"sofa"==e.modifyBedForm.type?i("text",[e._v("沙发")]):"canopy"==e.modifyBedForm.type?i("text",[e._v("双层床")]):"tatami"==e.modifyBedForm.type?i("text",[e._v("榻榻米")]):"other"==e.modifyBedForm.type?i("text",[e._v("其他")]):e._e()]):e._e()]),-1==e.houseStatus||2==e.houseStatus?i("view",{staticClass:"after-icon"},[i("text",{staticClass:"iconfont icon-right"})]):e._e()]),i("view",{staticClass:"form_item"},[i("view",{staticClass:"label"},[e._v("宽度")]),i("view",{staticClass:"content_wrap"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.modifyBedForm.weight,expression:"modifyBedForm.weight"}],staticClass:"ipt",attrs:{type:"number",disabled:0==e.houseStatus||1==e.houseStatus,"placeholder-style":"color:#ccc;",placeholder:"0.1-10范围内的数字",maxlength:"4",eventid:"cce28ffe-1"},domProps:{value:e.modifyBedForm.weight},on:{input:function(t){t.target.composing||(e.modifyBedForm.weight=t.target.value)}}})]),i("view",{staticClass:"unit"},[e._v("m")])]),i("view",{staticClass:"form_item"},[i("view",{staticClass:"label"},[e._v("长度")]),i("view",{staticClass:"content_wrap"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.modifyBedForm.length,expression:"modifyBedForm.length"}],staticClass:"ipt",attrs:{type:"number",disabled:0==e.houseStatus||1==e.houseStatus,"placeholder-style":"color:#ccc;",placeholder:"0.1-10范围内的数字",maxlength:"4",eventid:"cce28ffe-2"},domProps:{value:e.modifyBedForm.length},on:{input:function(t){t.target.composing||(e.modifyBedForm.length=t.target.value)}}})]),i("view",{staticClass:"unit"},[e._v("m")])])]),i("view",{staticClass:"bed-number-wrap"},[i("view",{staticClass:"main-box"},[i("text",[e._v("同规格床铺数")]),i("view",{staticClass:"number-control"},[-1==e.houseStatus||2==e.houseStatus?i("view",{staticClass:"reduce-btn",class:{"dis-num":e.modifyBedForm.num<=1},attrs:{eventid:"cce28ffe-3"},on:{click:function(t){t.stopPropagation(),e.modifyBedNumber(0)}}},[i("text",{staticClass:"iconfont icon-jian"})]):e._e(),i("view",{staticClass:"bed-num"},[i("text",[e._v(e._s(e.modifyBedForm.num))]),e._v("张")]),-1==e.houseStatus||2==e.houseStatus?i("view",{staticClass:"add-btn",class:{"dis-num":e.modifyBedForm.num>=99},attrs:{eventid:"cce28ffe-4"},on:{click:function(t){t.stopPropagation(),e.modifyBedNumber(1)}}},[i("text",{staticClass:"iconfont icon-jia"})]):e._e()])]),i("view",{staticClass:"tips"},[e._v("如果有相同类型和尺寸的床铺,可以设置同规格床铺数而不需要重复添加.如无需要,请填写1张")])]),-1==e.houseStatus||2==e.houseStatus?i("button",{staticClass:"add_btn my-btn-block",class:{dis_btn:e.isAllowEdit},attrs:{eventid:"cce28ffe-5"},on:{tap:function(t){e.submitEditBed()}}},[e._v("确定")]):e._e(),-1==e.houseStatus||2==e.houseStatus?i("button",{staticClass:"del_btn my-del-block",attrs:{eventid:"cce28ffe-6"},on:{tap:function(t){e.deleteBed()}}},[e._v("删除床铺")]):e._e()],1)},s=[];i.d(t,"a",function(){return o}),i.d(t,"b",function(){return s})},"63bc":function(e,t,i){"use strict";var o=i("6d72"),s=i.n(o);s.a},"6d72":function(e,t,i){},afa9:function(e,t,i){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=i("2f62"),s=i("942f"),a=n(i("8534"));function n(e){return e&&e.__esModule?e:{default:e}}function d(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},o=Object.keys(i);"function"===typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(i).filter(function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable}))),o.forEach(function(t){r(e,t,i[t])})}return e}function r(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var u={data:function(){return{house_id:"",curindex:"",oldBed:null,modifyBedForm:{type:"",weight:"",length:"",num:1},isLoading:!1,houseStatus:""}},onLoad:function(e){e.index&&(this.curindex=e.index,this.getCurBedInfo())},onShow:function(){},computed:d({},(0,o.mapState)(["releaseObj"]),{isAllowEdit:{get:function(){return Number(this.modifyBedForm.weight)<.1||Number(this.modifyBedForm.weight)>10||Number(this.modifyBedForm.length)<.1||Number(this.modifyBedForm.length)>10}}}),methods:d({},(0,o.mapMutations)(["editReleaseInfo","clearReleaseInfo","editReleaseInfoStatus","clearCustomBedOption","clearCurBedOption"]),{modifyBedNumber:function(e){if(0==e){if(this.modifyBedForm.num<=1)return;this.$set(this.modifyBedForm,"num",Number(this.modifyBedForm.num)-1)}else if(1==e){if(this.modifyBedForm.num>=99)return;this.$set(this.modifyBedForm,"num",Number(this.modifyBedForm.num)+1)}},submitEditBed:function(){var t=this;if(!this.isLoading){var i=t.house_id,o=this.modifyBedForm.type,n=Number(this.modifyBedForm.length).toFixed(1),d=Number(this.modifyBedForm.weight).toFixed(1),r=this.modifyBedForm.num,u={type:o,length:n,weight:d,num:r};if(t.compareObj(t.oldBed,u))e.navigateBack({delta:1});else{var c=this.releaseObj.bed?this.releaseObj.bed:[];c[t.curindex]=u;var l=JSON.stringify(c);t.isLoading=!0,e.showLoading({title:"修改床铺..",mask:!0}),(0,s.request)({url:"/wap/api/fangdong.php?action=improveHouse",method:"POST",data:{house_id:i,bed:l},success:function(i){if("success"===i.data.status){var o=i.data.content;t.editReleaseInfo(o),t.editReleaseInfoStatus(!0),e.hideLoading(),e.navigateBack({delta:1})}else a.default.layer("修改失败")},complete:function(){t.isLoading=!1}})}}},deleteBed:function(){if(!this.isLoading){var t=this,i=t.house_id;e.showModal({title:"删除",content:"是否删除这个床铺",confirmText:"删除",confirmColor:"#F05B72",success:function(o){if(o.confirm){var n=t.releaseObj.bed?t.releaseObj.bed:[];n.splice(t.curindex,1);var d=JSON.stringify(n);t.isLoading=!0,e.showLoading({title:"删除床铺...",mask:!0}),(0,s.request)({url:"/wap/api/fangdong.php?action=improveHouse",method:"POST",data:{house_id:i,bed:d},success:function(i){if("success"===i.data.status){var o=i.data.content;t.editReleaseInfo(o),t.editReleaseInfoStatus(!0),e.hideLoading(),e.navigateBack({delta:1})}else a.default.layer("删除失败")},complete:function(){t.isLoading=!1}})}else o.cancel&&console.log("用户点击取消")}})}},changeBedType:function(){if(0!=this.houseStatus&&1!=this.houseStatus){var t=this,i=["double","single","sofa","canopy","tatami","other"];e.showActionSheet({itemList:["双人床","单人床","沙发","双层床","榻榻米","其他"],success:function(e){var o=e.tapIndex;t.modifyBedForm.type=i[o]},fail:function(e){}})}},getCurBedInfo:function(){var e=this.releaseObj,t=e.bed?e.bed:[];this.house_id=e.id,this.houseStatus=e.status;var i=t[this.curindex];this.oldBed=a.default.deepCopy(i),this.modifyBedForm=a.default.deepCopy(i)},compareObj:function(e,t){for(var i in e)if(e[i]!==t[i])return!1;return!0}})};t.default=u}).call(this,i("6e42")["default"])},dd77:function(e,t,i){},df77:function(e,t,i){"use strict";i.r(t);var o=i("afa9"),s=i.n(o);for(var a in o)"default"!==a&&function(e){i.d(t,e,function(){return o[e]})}(a);t["default"]=s.a},e145:function(e,t,i){"use strict";var o=i("dd77"),s=i.n(o);s.a},e7e0:function(e,t,i){"use strict";i.r(t);var o=i("3d6f"),s=i("df77");for(var a in s)"default"!==a&&function(e){i.d(t,e,function(){return s[e]})}(a);i("63bc"),i("e145");var n=i("2877"),d=Object(n["a"])(s["default"],o["a"],o["b"],!1,null,"14c5b829",null);t["default"]=d.exports}},[["37d69","common/runtime","common/vendor"]]]);