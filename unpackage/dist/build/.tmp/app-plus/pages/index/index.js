(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/index/index"],{"095b":function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=r(i("3141")),s=r(i("60c0")),n=i("942f"),o=r(i("8534")),c=i("3c10");function r(t){return t&&t.__esModule?t:{default:t}}var l={components:{calendar:s.default,mpvuePicker:a.default},data:function(){return{indicatorDots:!0,autoplay:!0,interval:5e3,duration:500,shortHttp:c.shortHttp,weather:{hasData:!1,data:[]},contentArray:null,ambitusArray:null,i:null,luId:"",city:"",cityPickerValueDefault:[0,0,1],themeColor:"#007AFF",mode:"selector",deepLength:1,pickerValueDefault:[0],pickerValueArray:[],searchCity:"试试搜:花水湾",startTime:"",endTime:""}},onLoad:function(){console.log("时间",this.startTime),o.default.isLogin(),this.cityGps()},onReady:function(){this.bannerFn(),this.recommended()},methods:{onDetails:function(e){console.log("id:",e),t.navigateTo({url:"/pages/particulars/particulars?id=".concat(e)})},bannerFn:function(){t.showLoading({title:"加载中"});var e=this;t.request({url:c.shortHttp+c.banner,method:"GET",success:function(i){if("success"===i.data.status){console.log("轮播图",i),t.hideLoading();var a=i.data.content;e.contentArray=a}else t.showToast({title:i.data.errorMsg,icon:"none"})},fail:function(t){console.log(t)}})},tapSelect:function(){console.warn("城市",this.city),t.navigateTo({url:"/pages/index/search_city"})},change:function(t){var e=t.choiceDate,i=t.dayCount;console.log("入住从 "+e[0].re+"  到 "+e[1].re+"  共 "+i+" 晚"),this.startTime=e[0].re,this.endTime=e[1].re},clickSelect:function(){console.log("1111");var e=this.startTime,i=this.endTime;t.navigateTo({url:"/pages/selecteds/selecteds?start=".concat(e,"&end=").concat(i)})},cityGps:function(){var t=this;plus.geolocation.getCurrentPosition(function(e){t.city=e.address.city,console.log(t.city)})},recommended:function(){t.showLoading({title:"加载中"});var e=this;(0,n.request)({url:"/wap/api/search.php?action=index",data:{cityName:"广州"},success:function(i){t.hideLoading(),e.ambitusArray=i.data.content.item}})},clickDetails:function(e){t.navigateTo({url:"/pages/particulars/particulars?id=".concat(e)})},clickPhoto:function(e){console.log(e),t.navigateTo({url:"/pages/landlord_introduced/landlord_introduced?id=".concat(e)})},onCollect:function(e,i){var a=this,s=[];(0,n.request)({url:"/wap/api/my.php?action=favoriteClass",success:function(t){for(var e=t.data.content.item,i=0;i<e.length;i++)s.push({label:e[i].cname,value:e[i].cid}),a.pickerValueArray=s}});var o=!a.ambitusArray[i].isFavorite;a.i=a.ambitusArray[i],a.luId=a.ambitusArray[i].luId,a.$set(a.ambitusArray[i],"isFavorite",o),!0===o?setTimeout(function(){a.$refs.mpvuePicker.show()},1e3):!1===o&&(0,n.request)({url:"/wap/api/my.php?action=modifyFavorite",data:{luId:a.luId,favAction:"del"},success:function(e){console.log("取消了:",e),"success"==e.data.status&&t.showToast({title:"取消收藏",duration:2e3})}})},onCancel:function(t){this.i.isFavorite=!1},onConfirm:function(e){console.log("确认：",e.value);for(var i,a=this,s=e.value,o=0;o<s.length;o++)i=s[o];(0,n.request)({url:"/wap/api/my.php?action=modifyFavorite",data:{luId:a.luId,classId:i,favAction:"add"},success:function(e){console.log("收藏：",e),"success"==e.data.status?t.showToast({title:"收藏成功",duration:2e3}):t.showToast({title:"收藏失败",duration:2e3})}})}},onBackPress:function(){return this.$refs.mpvuePicker.showPicker?(this.$refs.mpvuePicker.pickerCancel(),!0):this.$refs.mpvueCityPicker.showPicker?(this.$refs.mpvueCityPicker.pickerCancel(),!0):void 0},onUnload:function(){},onPullDownRefresh:function(){console.log("refresh"),this.bannerFn(),this.recommended(),setTimeout(function(){t.stopPullDownRefresh()},2e3)}};e.default=l}).call(this,i("6e42")["default"])},"0b4b":function(t,e,i){},"0f42":function(t,e,i){},"6e7c":function(t,e,i){"use strict";var a=i("0f42"),s=i.n(a);s.a},9027:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("view",{staticClass:"content"},[i("view",{staticClass:"container"},[i("view",{staticClass:"uni-padding-wrap"},[i("view",{staticClass:"page-section swiper"},[i("view",{staticClass:"page-section-spacing"},[i("swiper",{staticClass:"swiper",attrs:{"indicator-dots":t.indicatorDots,autoplay:t.autoplay,interval:t.interval,duration:t.duration,"indicator-color":"#EBEDF3","indicator-active-color":"#E9516A"}},t._l(t.contentArray,function(e,a){return i("swiper-item",{key:a,attrs:{eventid:"7e569ed8-0-"+a,mpcomid:"7e569ed8-0-"+a},on:{tap:function(i){t.onDetails(e.luid)}}},[i("image",{staticClass:"banner",attrs:{src:t.shortHttp+e.mainimageurl}})])}))],1)])])]),i("view",{staticClass:"containers"},[i("view",{staticClass:"box"},[i("view",{staticClass:"location"},[i("view",{staticClass:"list-box"},[i("i",{staticClass:"iconfont icon-city"},[t._v("")]),i("text",{staticClass:"city"},[t._v(t._s(t.city))])],1),i("view",{staticClass:"list-box",attrs:{eventid:"7e569ed8-1"},on:{tap:t.tapOrientation}},[i("i",{staticClass:"iconfont icon-place"},[t._v("")]),i("text",{staticClass:"my-place"},[t._v("名宿")])],1)]),i("view",{staticClass:"calendar"},[i("calendar",{attrs:{eventid:"7e569ed8-2",mpcomid:"7e569ed8-1"},on:{change:t.change}})],1),i("view",{staticClass:"search",attrs:{eventid:"7e569ed8-3"},on:{tap:t.tapSelect}},[i("view",{staticClass:"list-box"},[i("i",{staticClass:"iconfont icon-city"},[t._v("")]),i("text",{staticClass:"city"},[t._v(t._s(t.searchCity))])],1),i("view",[i("i",{staticClass:"iconfont right"},[t._v("")])],1)]),i("button",{staticClass:"btn",attrs:{type:"primary",eventid:"7e569ed8-4"},on:{tap:t.clickSelect}},[t._v("开始搜索")])],1)]),i("view",{staticClass:"circum-box"},[t._m(0),i("view",{staticClass:"subtitle"},[t._v("体验不一样的旅行方式")]),t._l(t.ambitusArray,function(e,a){return i("view",{key:a,staticClass:"recommend-box"},[i("view",{staticClass:"list-box"},[i("image",{staticClass:"list-img",attrs:{src:t.shortHttp+e.landlordheadimgurl,eventid:"7e569ed8-5-"+a},on:{tap:function(i){t.clickDetails(e.luId)}}}),i("view",{staticClass:"username-box"},[i("view",{staticClass:"username-img-box",attrs:{eventid:"7e569ed8-6-"+a},on:{tap:function(i){t.clickPhoto(e.landlordId)}}},[i("image",{staticClass:"username-img",attrs:{src:t.shortHttp+e.luMainImageUrl}})]),i("view",{staticClass:"username-title-box"},[i("view",{staticClass:"username-house-title"},[t._v(t._s(e.luTitle))]),i("view",{staticClass:"comment"},[i("view",{staticClass:"lightning-box"},[i("i",{staticClass:"iconfont  lightning-icon"},[t._v("")]),i("text",[t._v("速顶")])],1),i("view",{staticClass:"comment-on-box"},[i("i",{staticClass:"iconfont comment-on-icon"},[t._v("")]),i("text",[t._v(t._s(e.luComments)+"条点评")])],1)])])]),i("view",{staticClass:"price"},[t._v("¥"),i("text",{staticClass:"specific-price"},[t._v(t._s(e.showPrice.price))]),t._v("起/晚")]),i("view",{staticClass:"icon-box",attrs:{eventid:"7e569ed8-7-"+a},on:{tap:function(i){t.onCollect(e.luId,a)}}},[i("i",{staticClass:"iconfont",class:e.isFavorite?"love-icon-red":"love-icon"},[t._v("")])],1)])])})],2),i("mpvue-picker",{ref:"mpvuePicker",attrs:{themeColor:t.themeColor,mode:t.mode,deepLength:t.deepLength,pickerValueDefault:t.pickerValueDefault,pickerValueArray:t.pickerValueArray,eventid:"7e569ed8-8",mpcomid:"7e569ed8-2"},on:{onConfirm:t.onConfirm,onCancel:function(e){t.onCancel()}}})],1)},s=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("view",{staticClass:"title-box"},[i("view",{staticClass:" line-left"}),i("text",{staticClass:"title-font"},[t._v("周边推荐")]),i("view",{staticClass:"line-right"})])}];i.d(e,"a",function(){return a}),i.d(e,"b",function(){return s})},9206:function(t,e,i){"use strict";var a=i("0b4b"),s=i.n(a);s.a},b89e:function(t,e,i){"use strict";i.r(e);var a=i("9027"),s=i("e896");for(var n in s)"default"!==n&&function(t){i.d(e,t,function(){return s[t]})}(n);i("6e7c"),i("9206");var o=i("2877"),c=Object(o["a"])(s["default"],a["a"],a["b"],!1,null,"25644aac",null);e["default"]=c.exports},c3ca:function(t,e,i){"use strict";i("83ff");var a=n(i("b0ce")),s=n(i("b89e"));function n(t){return t&&t.__esModule?t:{default:t}}Page((0,a.default)(s.default))},e896:function(t,e,i){"use strict";i.r(e);var a=i("095b"),s=i.n(a);for(var n in a)"default"!==n&&function(t){i.d(e,t,function(){return a[t]})}(n);e["default"]=s.a}},[["c3ca","common/runtime","common/vendor"]]]);