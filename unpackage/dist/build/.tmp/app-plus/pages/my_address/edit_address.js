(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/my_address/edit_address"],{"0e72":function(e,t,s){"use strict";s.r(t);var a=s("defe"),i=s.n(a);for(var r in a)"default"!==r&&function(e){s.d(t,e,function(){return a[e]})}(r);t["default"]=i.a},1585:function(e,t,s){"use strict";s.r(t);var a=s("bb23"),i=s("0e72");for(var r in i)"default"!==r&&function(e){s.d(t,e,function(){return i[e]})}(r);s("a1c8"),s("3e44a");var d=s("2877"),o=Object(d["a"])(i["default"],a["a"],a["b"],!1,null,"5b86ac6f",null);t["default"]=o.exports},"3e44a":function(e,t,s){"use strict";var a=s("5746"),i=s.n(a);i.a},5746:function(e,t,s){},"5b69":function(e,t,s){"use strict";s("fd37");var a=r(s("b0ce")),i=r(s("1585"));function r(e){return e&&e.__esModule?e:{default:e}}Page((0,a.default)(i.default))},"668e":function(e,t,s){},a1c8:function(e,t,s){"use strict";var a=s("668e"),i=s.n(a);i.a},bb23:function(e,t,s){"use strict";var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("view",{staticClass:"edit_address_page"},[s("view",{staticClass:"edit_address_wrap"},[s("view",{staticClass:"edit_address_form"},[s("view",{staticClass:"form-item"},[s("view",{staticClass:"label"},[e._v("姓名")]),s("view",{staticClass:"input"},[s("input",{directives:[{name:"model",rawName:"v-model.tirm",value:e.addressForm.truename,expression:"addressForm.truename",modifiers:{tirm:!0}}],attrs:{type:"text","placeholder-style":"font-size:14px;color:#cccccc;",placeholder:"收件人姓名",eventid:"467ea1fd-0"},domProps:{value:e.addressForm.truename},on:{input:function(t){t.target.composing||(e.addressForm.truename=t.target.value)}}})])]),s("view",{staticClass:"form-item"},[s("view",{staticClass:"label"},[e._v("手机号")]),s("view",{staticClass:"input"},[s("input",{directives:[{name:"model",rawName:"v-model.tirm",value:e.addressForm.phone,expression:"addressForm.phone",modifiers:{tirm:!0}}],attrs:{type:"text","placeholder-style":"font-size:14px;color:#cccccc;",placeholder:"收件人手机号",eventid:"467ea1fd-1"},domProps:{value:e.addressForm.phone},on:{input:function(t){t.target.composing||(e.addressForm.phone=t.target.value)}}})])]),s("view",{staticClass:"form-item"},[s("view",{staticClass:"label"},[e._v("所在地区")]),s("view",{staticClass:"input",attrs:{eventid:"467ea1fd-2"},on:{click:e.showCityPicker}},[e.addressForm.local?s("span",[e._v(e._s(e.addressForm.local))]):s("span",{staticStyle:{"font-size":"14px",color:"#CCCCCC"}},[e._v("省-市-区")])])]),s("view",{staticClass:"form-item"},[s("view",{staticClass:"label"},[e._v("详细地址")]),s("view",{staticClass:"input"},[s("input",{directives:[{name:"model",rawName:"v-model.tirm",value:e.addressForm.address,expression:"addressForm.address",modifiers:{tirm:!0}}],attrs:{type:"text","placeholder-style":"font-size:14px;color:#cccccc;",placeholder:"详细地址",eventid:"467ea1fd-3"},domProps:{value:e.addressForm.address},on:{input:function(t){t.target.composing||(e.addressForm.address=t.target.value)}}})])]),e.isSetDefault?s("view",{staticClass:"form-item"},[s("view",{staticClass:"label"},[e._v("设为默认地址")]),s("view",{staticClass:"input"},[s("switch",{staticClass:"o-switch",attrs:{color:"#F05B72",checked:"1"===e.addressForm.isdefault,eventid:"467ea1fd-4"},on:{change:e.defaultSwitch}})])]):e._e()]),s("view",{staticClass:"handle_btn_wrap"},[s("button",{staticClass:"del-btn",attrs:{eventid:"467ea1fd-5"},on:{tap:e.delAddress}},[e._v("删除")]),s("button",{staticClass:"save-btn",class:{dis_btn:e.isEditing},attrs:{eventid:"467ea1fd-6"},on:{tap:e.editAddress}},[e._v("保存")])],1)]),s("mpvue-city-picker",{ref:"mpvueCityPicker",attrs:{pickerValueDefault:e.addressForm.cityVlue,eventid:"467ea1fd-7",mpcomid:"467ea1fd-0"},on:{onCancel:e.onCancel,onConfirm:e.onConfirm}})],1)},i=[];s.d(t,"a",function(){return a}),s.d(t,"b",function(){return i})},defe:function(e,t,s){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=o(s("07e7")),i=s("2f62"),r=o(s("57ad")),d=s("ad14");function o(e){return e&&e.__esModule?e:{default:e}}function n(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{},a=Object.keys(s);"function"===typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(s).filter(function(e){return Object.getOwnPropertyDescriptor(s,e).enumerable}))),a.forEach(function(t){c(e,t,s[t])})}return e}function c(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var l={data:function(){return{isSetDefault:!0,addressForm:{address:"",addressid:"",city:"",district:"",isdefault:"0",phone:"",province:"",truename:"",local:"",cityVlue:[0,0,1]},isEditing:!1,isDeling:!1}},components:{mpvueCityPicker:a.default},computed:n({},(0,i.mapState)(["isEditAddress"])),watch:{},onLoad:function(e){var t=JSON.parse(e.param);this.isSetDefault="1"!==JSON.parse(e.param).isdefault;var s=t.province_code.split(",");s.map(function(e,t,s){s[t]=Number(e)}),t["cityVlue"]=s,t["local"]=t.province+"-"+t.city+"-"+t.district,this.addressForm=t},onShow:function(){},onBackPress:function(){if(this.$refs.mpvueCityPicker.showPicker)return this.$refs.mpvueCityPicker.pickerCancel(),!0},methods:n({},(0,i.mapMutations)(["addressEditStatus"]),{showCityPicker:function(){this.addressForm.cityVlue=this.addressForm.cityVlue.splice(0),this.$refs.mpvueCityPicker.show()},onCancel:function(e){console.log(e)},onConfirm:function(e){this.addressForm.cityVlue=e.value,this.addressForm.local=e.label;var t=e.label.split("-");this.addressForm.province=t[0],this.addressForm.city=t[1],this.addressForm.district=t[2],this.pickerText=JSON.stringify(e)},defaultSwitch:function(e){this.addressForm.isdefault=e.detail.value?"1":"0"},editAddress:function(){if(!this.isEditing){var t=this,s=this.addressForm.addressid,a=t.addressForm.truename,i=t.addressForm.phone,o=t.addressForm.province,n=t.addressForm.city,c=t.addressForm.district,l=t.addressForm.address,u=t.addressForm.local,f=t.addressForm.isdefault,m=t.addressForm.cityVlue.join(",");if(""===a)r.default.layer("请填写姓名");else if(r.default.phoneReg(i))if(""===u)r.default.layer("请选择地区");else if(""===l)r.default.layer("请填写详细地址");else{t.isEditing=!0;var p={truename:a,province:o,city:n,district:c,address:l,phone:i,isdefault:f,province_code:m};(0,d.request)({url:"/wap/api/my.php?action=UpdateAddress&addressid="+s,methods:"POST",data:p,success:function(s){"success"===s.data.status?(t.addressEditStatus(!0),e.navigateBack({delta:1})):r.default.layer("修改失败")},complete:function(){t.isEditing=!1}})}else r.default.layer("请填写正确的手机号")}},delAddress:function(){if(!this.isDeling){var t=this,s=t.addressForm.addressid;e.showModal({title:"",content:"是否删除该地址",confirmText:"删除",confirmColor:"#F05B72",success:function(a){a.confirm&&(t.isDeling=!0,console.log("用户点击确定"),(0,d.request)({url:"/wap/api/my.php?action=DeleteAddress&addressid="+s,method:"GET",success:function(s){"success"===s.data.status?(r.default.layer("删除成功"),t.addressEditStatus(!0),e.navigateBack({delta:1})):r.default.layer("删除失败")},complete:function(){t.isDeling=!1}}))}})}}})};t.default=l}).call(this,s("6e42")["default"])}},[["5b69","common/runtime","common/vendor"]]]);