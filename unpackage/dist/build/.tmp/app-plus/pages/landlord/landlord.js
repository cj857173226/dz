(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/landlord/landlord"],{"0748":function(t,e,a){"use strict";a.r(e);var s=a("bc4c"),i=a.n(s);for(var n in s)"default"!==n&&function(t){a.d(e,t,function(){return s[t]})}(n);e["default"]=i.a},"0c07":function(t,e,a){"use strict";var s=a("6617"),i=a.n(s);i.a},4059:function(t,e,a){"use strict";var s=a("6508"),i=a.n(s);i.a},6508:function(t,e,a){},6617:function(t,e,a){},bc4c:function(t,e,a){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=a("2f62"),i=a("ad14"),n=r(a("57ad")),o=r(a("5f19")),c=r(a("b548"));a("a1f6");function r(t){return t&&t.__esModule?t:{default:t}}function l(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{},s=Object.keys(a);"function"===typeof Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(a).filter(function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable}))),s.forEach(function(e){d(t,e,a[e])})}return t}function d(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var u={data:function(){return{phone:"",realname:"",idcard:"",passCard:"",headImgurl:"",province:"",city:"",localIndex:"",mode:"multiLinkageSelector",cityData:o.default,deepLength:2,defaultLocal:[0,0],isChangeCity:!1,curStatus:"",isLoading:!1}},components:{mpvuePicker:c.default},onLoad:function(){console.log(this.identityIsOk),this.getCurData(),this.testLandlord()},onShow:function(){if(this.isEditUserInfo){var e=t.getStorageSync("dz_userInfo");this.phone=e.phone,this.realname=e.realname,this.idcard=e.idcard,this.headImgurl=e.headImgurl,this.localIndex=e.province_code,this.province=e.province,this.city=e.city,this.testLandlord()}this.isUserInfoEditStatus(!1)},onBackPress:function(){if(this.$refs.ciytPicker.showPicker)return this.$refs.ciytPicker.pickerCancel(),!0},computed:l({},(0,s.mapState)(["isEditUserInfo"]),{identityIsOk:{get:function(){return!!(this.realname&&this.passCard||this.realname&&this.idcard)}}}),methods:l({},(0,s.mapMutations)(["isUserInfoEditStatus"]),{clickBenefit:function(){t.navigateTo({url:"/pages/landlord/landlord_benefit"})},clickIphone:function(){t.navigateTo({url:"/pages/landlord/iphone"})},information:function(){t.navigateTo({url:"/pages/landlord/information"})},payment:function(){t.navigateTo({url:"/pages/landlord/payment_term"})},chooseAvatar:function(){var e=this,a=t.getStorageSync("dz_token"),s=t.getStorageSync("dz_userInfo");t.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["album","camera"],success:function(i){var o=i.tempFiles[0].path;t.uploadFile({url:"http://dz.abontest.com/e/extend/uploadify/uploadify.php?dir=duanzu_head_no_mark&type=head_no_mark",filePath:o,name:"Filedata",header:{Authorization:"Bearer "+a},success:function(a){var i=JSON.parse(a.data);"success"===i.status?(s.headImgurl=i.content.url,t.setStorageSync("dz_userInfo",s),n.default.layer("上传成功"),e.testLandlord()):n.default.layer("头像上传失败,请稍后再试")},fail:function(){n.default.layer("头像上传失败,请稍后再试")},complete:function(){}})}})},changeLocal:function(){var t;console.log(this.localIndex),""===this.localIndex?t=[0,0]:(t=this.localIndex.split(","),t.map(function(t,e,a){a[e]=Number(t)})),this.defaultLocal=t.splice(0),this.mode="multiLinkageSelector",this.deepLength=2,this.$refs.ciytPicker.show()},confirmLocal:function(e){if(!this.isChangeCity){var a=this,s=e.label.split("-"),o={province:s[0],city:s[1],province_code:e.index.join(",")};e.index.join(",")!==a.localIndex&&(a.isChangeCity=!0,(0,i.request)({url:"/wap/api/my.php?action=updateInfo",method:"POST",data:o,success:function(e){if("success"===e.data.status){console.log(e);var s=t.getStorageSync("dz_userInfo"),i=Object.assign(s,o);t.setStorageSync("dz_userInfo",i),n.default.layer("修改成功"),a.testLandlord()}else n.default.layer("修改失败")},complete:function(){a.isChangeCity=!1,a.getCurData()}}))}},cancelLocal:function(t){},testLandlord:function(){var t=this;(0,i.request)({url:"/wap/api/my.php?action=tobeLandlord",method:"GET",success:function(e){"success"===e.data.status&&(t.curStatus=e.data.content.status)},complete:function(){}})},applyLandlord:function(){if(!this.isLoading){var t=this,e={idcard:t.idcard,passport:t.passCard,phone:t.phone,realname:t.realname,userpic:t.headImgurl,province:t.province,city:t.city};t.isLoading=!0,(0,i.request)({url:"/wap/api/my.php?action=tobeLandlord",method:"POST",data:e,success:function(e){"success"===e.data.status?(n.default.layer(e.data.errorMsg),t.testLandlord()):n.default.layer(e.data.errorMsg)},complete:function(){t.isLoading=!1}})}},reApplyLandlord:function(){if(!this.isLoading){var t=this,e={idcard:t.idcard,passport:t.passCard,phone:t.phone,realname:t.realname,userpic:t.headImgurl,province:t.province,city:t.city};t.isLoading=!0,(0,i.request)({url:"/wap/api/my.php?action=tobeLandlord&post=next",method:"POST",data:e,success:function(e){"success"===e.data.status?(n.default.layer(e.data.errorMsg),t.testLandlord()):n.default.layer(e.data.errorMsg)},complete:function(){t.isLoading=!1}})}},becomeLandlord:function(){if(!this.isLoading){var e=this,a=t.getStorageSync("dz_userInfo");e.isLoading=!0,(0,i.request)({url:"/wap/api/my.php?action=beTheLandlord",method:"POST",success:function(s){"success"===s.data.status?(a.isFangDong=!0,t.setStorageSync("dz_userInfo",a),t.navigateBack({delta:1}),e.testLandlord()):n.default.layer(s.data.errorMsg)},complete:function(){e.isLoading=!1}})}},getCurData:function(){var e=t.getStorageSync("dz_userInfo");console.log(e),this.phone=e.phone,this.passCard=e.passport,this.realname=e.realname,this.idcard=e.idcard,this.headImgurl=e.headImgurl,this.localIndex=e.province_code,this.province=e.province,this.city=e.city}})};e.default=u}).call(this,a("6e42")["default"])},d75f:function(t,e,a){"use strict";a.r(e);var s=a("de1e"),i=a("0748");for(var n in i)"default"!==n&&function(t){a.d(e,t,function(){return i[t]})}(n);a("4059"),a("0c07");var o=a("2877"),c=Object(o["a"])(i["default"],s["a"],s["b"],!1,null,"21482470",null);e["default"]=c.exports},d873:function(t,e,a){"use strict";a("fd37");var s=n(a("b0ce")),i=n(a("d75f"));function n(t){return t&&t.__esModule?t:{default:t}}Page((0,s.default)(i.default))},de1e:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("view",{staticClass:"contaniers"},[a("view",{staticClass:"img-box",attrs:{eventid:"6090117f-0"},on:{tap:t.clickBenefit}},[a("view",{staticClass:"backgroun-img"},[t._v("为什么要成为房东？")])]),a("view",{staticClass:"landlord-box"},[a("view",{staticClass:"box"},[a("view",{staticClass:"list-box"},[a("text",{staticClass:"iconfont iphone"},[t._v("")]),a("view",{staticClass:"list-title-box"},[a("view",{staticClass:"mobile-phone-box"},[a("view",{staticClass:"mobile-phone"},[t._v("手机号")]),a("view",{staticClass:"phone-number"},[""===t.phone?a("text",[t._v("请填写")]):a("text",[t._v(t._s(t.phone))])])]),a("view",{staticClass:"off-the-stocks"},[a("text",{domProps:{textContent:t._s(""===t.phone?"未完成":"已完成")}}),a("text",{staticClass:"iconfont right"},[t._v("")])])])]),a("view",{staticClass:"list-box",attrs:{eventid:"6090117f-1"},on:{tap:t.chooseAvatar}},[a("text",{staticClass:"iconfont iphone"},[t._v("")]),a("view",{staticClass:"list-title-box"},[a("view",{staticClass:"mobile-phone-box"},[a("view",{staticClass:"mobile-phone"},[t._v("真实头像")]),a("view",{staticClass:"phone-number"},[a("text",{domProps:{textContent:t._s(""!==t.headImgurl?"已上传":"未上传")}})])]),a("view",{staticClass:"off-the-stocks"},[a("text",{domProps:{textContent:t._s(""!==t.headImgurl?"已完成":"未完成")}}),a("text",{staticClass:"iconfont right"},[t._v("")])])])]),a("view",{staticClass:"list-box",attrs:{eventid:"6090117f-2"},on:{tap:t.information}},[a("text",{staticClass:"iconfont iphone"},[t._v("")]),a("view",{staticClass:"list-title-box"},[a("view",{staticClass:"mobile-phone-box"},[a("view",{staticClass:"mobile-phone"},[t._v("真实身份")]),a("view",{staticClass:"phone-number",domProps:{textContent:t._s(t.identityIsOk?"已完善":"请完善真实身份")}})]),a("view",{staticClass:"off-the-stocks"},[a("text",{domProps:{textContent:t._s(t.identityIsOk?"已完成":"未完成")}}),a("text",{staticClass:"iconfont right"},[t._v("")])])])]),a("view",{staticClass:"list-box",attrs:{eventid:"6090117f-3"},on:{tap:function(e){t.changeLocal()}}},[a("text",{staticClass:"iconfont iphone"},[t._v("")]),a("view",{staticClass:"list-title-box"},[a("view",{staticClass:"mobile-phone-box"},[a("view",{staticClass:"mobile-phone"},[t._v("地区")]),a("view",{staticClass:"phone-number"},[""===t.province||""===t.city?a("text",[t._v("请选择")]):a("text",[t._v(t._s(t.province)+"-"+t._s(t.city))])])]),a("view",{staticClass:"off-the-stocks"},[""===t.province||""===t.city?a("text",[t._v("未完成")]):a("text",[t._v("已完成")]),a("text",{staticClass:"iconfont right"},[t._v("")])])])]),a("view",{staticClass:"status_wrap"},[a("view",{staticClass:"landlord_status"},[a("text",{staticClass:"iconfont icon-dian",staticStyle:{"font-size":"32rpx",color:"#FFFFFF"}}),1===t.curStatus||""===t.curStatus?a("text",[t._v("不是房东")]):t._e(),2===t.curStatus?a("text",[t._v("审核中")]):t._e(),3===t.curStatus?a("text",[t._v("审核失败")]):t._e(),4===t.curStatus?a("text",[t._v("审核成功")]):t._e(),5===t.curStatus?a("text",[t._v("已成为房东")]):t._e()])])]),2===t.curStatus?a("view",{staticClass:"dis_btn my-btn-block"},[t._v("正在审核...")]):1===t.curStatus?a("view",{staticClass:"my-btn-block",class:{dis_btn:t.isLoading},attrs:{eventid:"6090117f-4"},on:{tap:function(e){t.applyLandlord()}}},[t._v("申请成为房东")]):3===t.curStatus?a("view",{staticClass:"my-btn-block",class:{dis_btn:t.isLoading},attrs:{eventid:"6090117f-5"},on:{tap:function(e){t.reApplyLandlord()}}},[t._v("重新申请")]):4===t.curStatus?a("view",{staticClass:"my-btn-block",class:{dis_btn:t.isLoading},attrs:{eventid:"6090117f-6"},on:{tap:function(e){t.becomeLandlord()}}},[t._v("成为房东")]):5===t.curStatus?a("view",{staticClass:"dis_btn my-btn-block"},[t._v("已成为房东")]):a("view",{staticClass:"dis_btn my-btn-block"},[t._v("等待检测...")])]),a("mpvue-picker",{ref:"ciytPicker",attrs:{themeColor:"#F05B72",mode:t.mode,deepLength:t.deepLength,pickerValueDefault:t.defaultLocal,pickerValueArray:t.cityData,eventid:"6090117f-7",mpcomid:"6090117f-0"},on:{onConfirm:t.confirmLocal,onCancel:t.cancelLocal}})],1)},i=[];a.d(e,"a",function(){return s}),a.d(e,"b",function(){return i})}},[["d873","common/runtime","common/vendor"]]]);